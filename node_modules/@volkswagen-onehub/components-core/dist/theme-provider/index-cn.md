## 用途

`ThemeProvider`负责为其所有子组件主题设置正确的
主题。‘主题’包括颜色、字号、字体和
图标的定义。

如果没有传递有效的主题名称（`ThemeName`类型）或主题定义（
`PartialThemeDefinition`类型，可以是`ThemeDefinition`类型的分部定义）
`ThemeProvider`将始终回退到默认主题 'main'。分部定义
只能覆盖现有的主题属性，无法
添加和检索自定义键。

应用程序中必须至少包含一个`ThemeProvider`，
但`ThemeProvider`也可以嵌套，使每个提供程序均覆盖前一个提供程序的
全部或分部定义。

因为`ThemeProvider`组件在内部使用
[ThemeProvider 样式化组件](https://www.styled-components.com/docs/advanced#theming)，
因此主题化仅适用于同样使用`样式化组件`进行样式化
的组件。

## 使用

### 无默认道具的 ThemeProvider

```javascript
<SomeRootComponent>
  // theme will default to 'main'
  <ThemeProvider>
    <ChildComponent_1 />
    <ChildComponent_2 />
    <ChildComponent_3 />
  <ThemeProvider/>
<SomeRootComponent/>
```

### 主题为“main”的 ThemeProvider

```javascript
<SomeRootComponent>
  // explicitly use theme 'main'
  <ThemeProvider theme="main">
    <ChildComponent_1 />
    <ChildComponent_2 />
    <ChildComponent_3 />
  <ThemeProvider/>
<SomeRootComponent/>
```

### 具有分部主题覆盖的 ThemeProvider

```javascript
const themeOverride: PartialThemeDefinition = {
  color: {
    'container.background.primary': 'red-100'
  }
};

<SomeRootComponent>
  // this will override only `container.background.primary` of the current theme
  <ThemeProvider theme="{themeOverride}">
    <ChildComponent_1 />
    <ChildComponent_2 />
    <ChildComponent_3 />
  <ThemeProvider/>
<SomeRootComponent/>
```

## 应用

### _getThemeProp()_

`getThemeProp()` 帮助程序函数旨在简化主题值的提取，以便
进行样式化。`getThemeProp()` 将收到组件道具，
以及相对于当前主题根所需值的“路径”，
并将其作为自身唯一的参数。

```javascript
// import the theme() helper utility
import {theme} from 'path/to/theme-provider/index';

// use in styled components tagged template literal
const StyledElement = styled.div`
	color: ${props => getThemeProp(props, 'copy.color.secondary')};
	background: ${props => getThemeProp(props, 'container.background.secondary')};
	border: 1px solid ${props => getThemeProp('copy.color.primary')};
	font-family: ${props => getThemeProp(props, 'copy.font.standard')};
`;
```

### _theme_

不要直接通过‘路径’引用主题属性
(`'container.background.secondary'`)，也可以使用由`ThemeProvider`提供的`theme`属性地图，
以启用代码提示和类型检查
((`theme.container.background.secondary`))。

```javascript
// import the getThemeProp() helper utility and theme property map
import {getThemeProp, theme} from 'path/to/theme-provider/index';

// use in styled components tagged template literal
const StyledElement = styled.div`
	color: ${theme(token.color.secondary)};
	background: ${props => getThemeProp(props, props.backgroundColor)};
	border: 1px solid ${theme(token.copy.color.primary)};
	font-family: ${props => getThemeProp(props, token.copy.font[props.font])};
`;
```

## 相关文章

- [颜色/主题](/doc/docs/documentation/40-appearance/color?styleguide-components-enabled=true&react--core-components-enabled=true&appearance-enabled=true)
- [带切换功能的演示主题提供程序](/pattern/demo-theme-provider-with-toggle/?react--core-components-enabled=true&styleguide-components-enabled=true&core-components-enabled=true)

