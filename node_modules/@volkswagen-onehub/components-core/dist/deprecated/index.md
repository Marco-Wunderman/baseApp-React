### Description

This is a helper pattern to mark components or props on components as well as
component methods as deprecated in development mode. The deprecation warning
(checked with `process.env.NODE_ENV !== 'production'`) **only is shown if the
component, method or prop is used**. This will ensure a consistent behaviour for
deprecations.

This pattern can either be used as:

- decorator on components
- decorator on methods
- a function wrapper on functional components
- a higher order component

#### Remark

The deprecation component also hoists static class properties. React own and
known built-ins are not hoisted. The only exception for that is the
`defaultProps` property because this is used from other components as well.

### Helpful messages ðŸ“£

If you define a custom deprecation message you should take the following 3
questions into account (all of them should be true if an own message is used):

1.  Is the component, prop or method name mentioned?
2.  Does it say that something is actually _deprecated_?
3.  Does it provide an alternative solution?

### Class deprecation

To deprecate a whole component and show the corresponding warning in development
mode use the decorator as it is:

```typescript
@deprecated()
class MyComponent extends React.Component {}
```

You can also use a custom ([if helpful](#helpful-messages)) message:

```typescript
@deprecated(
	'The pattern "MyComponent" is deprecated! Please use "AnotherComponent" instead.'
)
class MyComponent extends React.Component {}
```

### Deprecate props

To deprecate React props you can pass an array of prop names to the `deprecated`
utility. Only if the prop is used (internally checked with `componentDidMount`
and `componentDidUpdate`) the deprecation warning will be shown. Also a generic
specifying the props used is necessary to pass.

```typescript
// Define:

interface MyComponentProps {
	title?: string;
}

@deprecated<MyComponentProps>(['title'])
class MyComponent extends React.Component {}

// Usage that triggers the warning:
<MyComponent title="Hello" />;
```

For props as well you can define a custom [helpful](#helpful-messages)
deprecation message. This is done by using an array instead of a string where
the first element is the prop and the second the custom message.

```typescript
// Define:
@deprecated<MyComponentProps>([
	[
		'anotherProp',
		'The prop "anotherProp" on "MyComponent" is deprecated! Please use ...'
	]
])
class MyComponent extends React.Component {}

// Usage that triggers the warning:
<MyComponent title="Hello" />;
```

### Function wrapper

The deprecation helper can also be used as a function wrapper with all options
available for [Class deprecation](#class-deprecation) and
[Deprecate props](#deprecate-props).

To deprecate the whole functional component:

```typescript
const MyComponent = deprecated(() => <div />);
```

Use a custom [helpful](#helpful-messages) deprecation message:

```typescript
const MyComponent = deprecated(
	() => <div />,
	'The pattern "MyComponent" is deprecated! Please use "AnotherComponent" instead.'
);
```

Or for [deprecate props](#deprecate-props) with or without custom messages:

```typescript
const MyComponent = deprecated<MyComponentProps>(() => <div />, [
	'title',
	['filter', 'The prop "filter" on "MyComponent" is deprecated! Please use ...']
]);
```

### Methods

It is possible if necessary to deprecate the usage of a component method. This
is something more indirect, because methods defined on components are not called
directly. But, from time to time you want to deprecate the usage inside a
component itself for the next developer (e.g. if you want to make a refactoring
in the near future).

To deprecate a component method you can use the decorator as well:

```typescript
class MyComponent extends React.Component {
	@deprecated()
	handleSomething() {
		// ...
	}

	render() {
		this.handleSomething(); // Warning is only shown if called
		// ...
	}
}
```

Method deprecations can take an optional [helpful](#helpful-messages)
deprecation message:

```typescript
class MyComponent extends React.Component {
	@deprecated(
		'The method "handleSomething" on component "MyComponent" is deprecated. Please use ...'
	)
	handleSomething() {
		// ...
	}

	render() {
		this.handleSomething();
		// ...
	}
}
```

### Higher order component

You can use this helper also as an
"[higher order component â†—](https://reactjs.org/docs/higher-order-components.html)"
with all options available for custom messages and prop deprecations.

To use it as higher order component:

```typescript
class MyComponent extends React.Component {}

const WrappedComponent = deprecated()(MyComponent);
```

With a custom [helpful](#helpful-messages) deprecation message:

```typescript
class MyComponent extends React.Component {}

const WrappedComponent = deprecated(
	'The pattern "MyComponent" is deprecated! Please ...'
)(MyComponent);
```

Or to deprecate props:

```typescript
class MyComponent extends React.Component {}

const WrappedComponent = deprecated<MyComponentProps>([
	'title',
	['filter', 'The prop "filter" on "MyComponent" is deprecated! Please use ...']
])(MyComponent);
```
