### 描述

这是一个帮助模式，用于在组件上标记组件或道具，
以及标记在开发模式下被弃用的组件方法。弃用警告
（使用`process.env.NODE_ENV！=='production'`进行检查） **仅在
使用组件、方法或道具方可显示。**这将确保弃用具有
一致的行为。

此模式可以用作：

- 组件装饰器
- 方法装饰器
- 功能组件的函数包装器
- 高阶组件

#### 备注

弃用组件还可以提升静态类属性，但无法提升
React 本身和已知的内置插件。唯一的例外是
`defaultProps`属性，因为也可以从其他组件中使用该属性。

### 有用消息📣

如果您想定义自定义的弃用消息，则考虑到以下 ３ 个
问题（如果使用自定义消息，则这 ３ 个问题的答案均为“是”）：

1.  是否提到了组件、道具或方法名称？
2.  消息是否表明某事物实际上被弃用了　(_deprecated_)？
3.  是否提供了替代解决方案？

### 类弃用

要弃用整个组件并在开发模式中显示相应的警告，
请使用原本的装饰器：

```typescript
@deprecated()
class MyComponent extends React.Component {}
```

您还可以使用自定义的（[若有用](#helpful-messages)）消息：

```typescript
@deprecated(
	'The pattern "MyComponent" is deprecated! Please use "AnotherComponent" instead.'
)
class MyComponent extends React.Component {}
```

### 弃用道具

要弃用 React 道具，您可以将一系列道具名称传递给`deprecated`（已弃用的）
应用。仅在使用道具时（使用`componentDidMount`
和`componentDidUpdate`进行内部检查）才会显示弃用警告。也必须传递
指明所用道具的通用类。

```typescript
// Define:

interface MyComponentProps {
	title?: string;
}

@deprecated<MyComponentProps>(['title'])
class MyComponent extends React.Component {}

// Usage that triggers the warning:
<MyComponent title="Hello" />;
```

对于道具，也可以定义自定义的[有用](#helpful-messages)
弃用消息。为此，应通过使用数组而不是字符串来实现这一点，
第一个元素是道具，第二个元素是自定义消息。

```typescript
// Define:
@deprecated<MyComponentProps>([
	[
		'anotherProp',
		'The prop "anotherProp" on "MyComponent" is deprecated! Please use ...'
	]
])
class MyComponent extends React.Component {}

// Usage that triggers the warning:
<MyComponent title="Hello" />;
```

### 功能包装器

弃用助手也可以用作函数包装器，
可用于[类弃用](#class-deprecation) 和
[弃用道具](#deprecate-props).

要弃用整个功能组件：

```typescript
const MyComponent = deprecated(() => <div />);
```

请使用自定义的[有用](#helpful-messages)弃用消息：

```typescript
const MyComponent = deprecated(
	() => <div />,
	'The pattern "MyComponent" is deprecated! Please use "AnotherComponent" instead.'
);
```

或者，对于有或没有自定义消息的[弃用道具](#deprecate-props) ：

```typescript
const MyComponent = deprecated<MyComponentProps>(() => <div />, [
	'title',
	['filter', 'The prop "filter" on "MyComponent" is deprecated! Please use ...']
]);
```

### 方法

如有必要，可以弃用组件方法的使用。该操作
更具间接性，因为没有直接调用在组件上定义的
方法。但是，有时您会想要弃用一个用于下一位开发人员的组件内部的使用，
（例如，如果您想在不久的将来
进行重构）。

您也可以使用装饰器来弃用组件方法：

```typescript
class MyComponent extends React.Component {
	@deprecated()
	handleSomething() {
		// ...
	}

	render() {
		this.handleSomething(); // Warning is only shown if called
		// ...
	}
}
```

方法弃用可以使用可选的[有用](#helpful-messages)
弃用消息：

```typescript
class MyComponent extends React.Component {
	@deprecated(
		'The method "handleSomething" on component "MyComponent" is deprecated. Please use ...'
	)
	handleSomething() {
		// ...
	}

	render() {
		this.handleSomething();
		// ...
	}
}
```

### 高阶组件

您也可以将此助手用作
"[高阶组件 ↗](https://reactjs.org/docs/higher-order-components.html)"
包含所有可用于自定义消息和道具弃用的选项。

要将其用作高阶组件：

```typescript
class MyComponent extends React.Component {}

const WrappedComponent = deprecated()(MyComponent);
```

使用自定义的 [有用](#helpful-messages) 弃用消息：

```typescript
class MyComponent extends React.Component {}

const WrappedComponent = deprecated(
	'The pattern "MyComponent" is deprecated! Please ...'
)(MyComponent);
```

或者，要想弃用道具：

```typescript
class MyComponent extends React.Component {}

const WrappedComponent = deprecated<MyComponentProps>([
	'title',
	['filter', 'The prop "filter" on "MyComponent" is deprecated! Please use ...']
])(MyComponent);
```

